{"ast":null,"code":"import _objectSpread from\"C:/Users/user/Desktop/Diploma/Krenovator-TSA/auth/auth-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/user/Desktop/Diploma/Krenovator-TSA/auth/auth-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from'react';import axios from'axios';import{userContext}from'../userContext';import{Lists}from'../Components/UI/Lists/Lists';import{Control}from'../Components/UI/Control/Control';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Home=function Home(){var _useState=useState('All'),_useState2=_slicedToArray(_useState,2),filter=_useState2[0],setFilter=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),input=_useState4[0],setInput=_useState4[1];var user=useContext(userContext);var navigate=useNavigate();var onSubmitHandler=function onSubmitHandler(e){e.preventDefault();var data={input:input,isCheck:false};console.log(data);//? if the user isn't auth then redirect to the login page\nif(!user.data)navigate('/login');axios.post('http://localhost:5000/createTodo',data,{withCredentials:true}).then(function(res){console.log(res);var todoList={todoId:res.data.todoId,input:res.data.input,isCheck:false};//? copy user data\nvar userObj=_objectSpread({},user.data);//? push new list to re render\nuserObj.todo.push(todoList);user.setData(userObj);setInput('');// console.log(userObj)\n});};return/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-full bg-gray-100 \",children:/*#__PURE__*/_jsxs(\"section\",{className:\"tablet:m-auto  bg-no-repeat bg-cover h-52 w-full bg-desktop-light dark:bg-desktop-dark py-10 px-10\",children:[/*#__PURE__*/_jsx(\"header\",{className:\" max-w-lg m-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white mt-5 rounded-lg \",children:/*#__PURE__*/_jsx(\"form\",{onSubmit:onSubmitHandler,children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"Create a new todo...\",className:\"text-sm py-5 px-5 w-full rounded-xl focus:border-white focus:outline-none\",value:input,onChange:function onChange(e){return setInput(e.target.value);}})})})}),/*#__PURE__*/_jsx(\"main\",{className:\"max-w-lg m-auto\",children:/*#__PURE__*/_jsx(Lists,{filter:filter})}),/*#__PURE__*/_jsx(\"footer\",{className:\"max-w-lg m-auto pb-20\",children:/*#__PURE__*/_jsx(Control,{setFilter:setFilter,filter:filter})})]})});};","map":{"version":3,"sources":["C:/Users/user/Desktop/Diploma/Krenovator-TSA/auth/auth-client/src/pages/Home.jsx"],"names":["React","useContext","useState","axios","userContext","Lists","Control","useNavigate","Home","filter","setFilter","input","setInput","user","navigate","onSubmitHandler","e","preventDefault","data","isCheck","console","log","post","withCredentials","then","res","todoList","todoId","userObj","todo","push","setData","target","value"],"mappings":"uWAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,CAA6BC,QAA7B,KAA6C,OAA7C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,gBAA5B,CACA,OAASC,KAAT,KAAsB,8BAAtB,CACA,OAASC,OAAT,KAAwB,kCAAxB,CACA,OAASC,WAAT,KAA4B,kBAA5B,C,wFAEA,MAAO,IAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAM,CAGtB,cAA4BN,QAAQ,CAAC,KAAD,CAApC,wCAAOO,MAAP,eAAeC,SAAf,eACA,eAA0BR,QAAQ,CAAC,EAAD,CAAlC,yCAAOS,KAAP,eAAcC,QAAd,eAEA,GAAMC,CAAAA,IAAI,CAAGZ,UAAU,CAACG,WAAD,CAAvB,CACA,GAAMU,CAAAA,QAAQ,CAAGP,WAAW,EAA5B,CAEA,GAAMQ,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAC,CAAC,CAAI,CACzBA,CAAC,CAACC,cAAF,GAEA,GAAMC,CAAAA,IAAI,CAAG,CAACP,KAAK,CAALA,KAAD,CAAQQ,OAAO,CAAE,KAAjB,CAAb,CACAC,OAAO,CAACC,GAAR,CAAYH,IAAZ,EAEA;AACA,GAAI,CAACL,IAAI,CAACK,IAAV,CAAgBJ,QAAQ,CAAC,QAAD,CAAR,CAEhBX,KAAK,CAACmB,IAAN,CAAW,kCAAX,CAA+CJ,IAA/C,CAAqD,CAACK,eAAe,CAAE,IAAlB,CAArD,EACCC,IADD,CACM,SAAAC,GAAG,CAAI,CACTL,OAAO,CAACC,GAAR,CAAYI,GAAZ,EACA,GAAMC,CAAAA,QAAQ,CAAG,CAACC,MAAM,CAAEF,GAAG,CAACP,IAAJ,CAASS,MAAlB,CAA0BhB,KAAK,CAAEc,GAAG,CAACP,IAAJ,CAASP,KAA1C,CAAiDQ,OAAO,CAAE,KAA1D,CAAjB,CAEA;AACA,GAAMS,CAAAA,OAAO,kBAAOf,IAAI,CAACK,IAAZ,CAAb,CACA;AACAU,OAAO,CAACC,IAAR,CAAaC,IAAb,CAAkBJ,QAAlB,EAEAb,IAAI,CAACkB,OAAL,CAAaH,OAAb,EACAhB,QAAQ,CAAC,EAAD,CAAR,CACA;AAGH,CAfD,EAgBH,CAzBD,CA4BA,mBAEE,YAAK,SAAS,CAAC,4BAAf,uBAEE,iBAAS,SAAS,CAAC,oGAAnB,wBACE,eAAQ,SAAS,CAAC,kBAAlB,uBACE,YAAK,SAAS,CAAC,2BAAf,uBACI,aAAM,QAAQ,CAAEG,eAAhB,uBACI,cAAO,WAAW,CAAC,sBAAnB,CAA2C,SAAS,CAAC,2EAArD,CAAiI,KAAK,CAAEJ,KAAxI,CAA+I,QAAQ,CAAE,kBAACK,CAAD,QAAOJ,CAAAA,QAAQ,CAACI,CAAC,CAACgB,MAAF,CAASC,KAAV,CAAf,EAAzJ,EADJ,EADJ,EADF,EADF,cASE,aAAM,SAAS,CAAC,iBAAhB,uBACE,KAAC,KAAD,EAAO,MAAM,CAAExB,MAAf,EADF,EATF,cAaE,eAAQ,SAAS,CAAC,uBAAlB,uBACE,KAAC,OAAD,EAAS,SAAS,CAAEC,SAApB,CAA+B,MAAM,CAAED,MAAvC,EADF,EAbF,GAFF,EAFF,CAwBH,CA7DM","sourcesContent":["import React, { useContext,  useState } from 'react'\r\nimport axios from 'axios'\r\nimport { userContext } from '../userContext'\r\nimport { Lists } from '../Components/UI/Lists/Lists'\r\nimport { Control } from '../Components/UI/Control/Control'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nexport const Home = () => {\r\n\r\n    \r\n    const [filter, setFilter] = useState('All');\r\n    const [input, setInput] = useState('')\r\n\r\n    const user = useContext(userContext); \r\n    const navigate = useNavigate() \r\n\r\n    const onSubmitHandler = e => {\r\n        e.preventDefault()\r\n\r\n        const data = {input, isCheck: false}\r\n        console.log(data)\r\n\r\n        //? if the user isn't auth then redirect to the login page\r\n        if (!user.data) navigate('/login')\r\n\r\n        axios.post('http://localhost:5000/createTodo', data, {withCredentials: true})\r\n        .then(res => {\r\n            console.log(res)\r\n            const todoList = {todoId: res.data.todoId, input: res.data.input, isCheck: false}\r\n\r\n            //? copy user data\r\n            const userObj = {...user.data}\r\n            //? push new list to re render\r\n            userObj.todo.push(todoList)\r\n\r\n            user.setData(userObj)\r\n            setInput('')\r\n            // console.log(userObj)\r\n          \r\n            \r\n        })\r\n    }\r\n  \r\n  \r\n    return (\r\n      \r\n      <div className=\"w-full h-full bg-gray-100 \">\r\n     \r\n        <section className=\"tablet:m-auto  bg-no-repeat bg-cover h-52 w-full bg-desktop-light dark:bg-desktop-dark py-10 px-10\">\r\n          <header className=\" max-w-lg m-auto\">\r\n            <div className=\"bg-white mt-5 rounded-lg \">\r\n                <form onSubmit={onSubmitHandler}>\r\n                    <input placeholder=\"Create a new todo...\"  className=\"text-sm py-5 px-5 w-full rounded-xl focus:border-white focus:outline-none\" value={input} onChange={(e) => setInput(e.target.value)}/>\r\n                </form>\r\n            </div>\r\n          </header>\r\n  \r\n          <main className=\"max-w-lg m-auto\">\r\n            <Lists filter={filter} />\r\n          </main>\r\n  \r\n          <footer className=\"max-w-lg m-auto pb-20\">\r\n            <Control setFilter={setFilter} filter={filter}/>\r\n          </footer>\r\n        </section>\r\n    \r\n      </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}