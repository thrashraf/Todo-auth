{"ast":null,"code":"import _toConsumableArray from\"C:/Users/user/Desktop/Diploma/Krenovator-TSA/auth/auth-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/Users/user/Desktop/Diploma/Krenovator-TSA/auth/auth-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _this=this;import React,{useEffect,useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import editIcon from'../assets/edit.png';import deleteIcon from'../assets/delete.png';import eyeIcon from'../assets/eye.png';import{Backdrop}from'../Components/UI/Backdrop/Backdrop';import{Modal}from'../Components/UI/Modal/Modal';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var UsersTable=function UsersTable(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),backdrop=_useState4[0],setBackdrop=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),todos=_useState6[0],setTodos=_useState6[1];var navigate=useNavigate();useEffect(function(){axios.get('http://localhost:5000/admin',{withCredentials:true}).then(function(res){console.log(res);var users=[];var data=res.data;for(var key in data){users.push({id:key,name:data[key].name,email:data[key].email,date:data[key].date,role:data[key].role});}setUser(users);});},[]);var deleteUserHandler=function deleteUserHandler(id){axios.delete(\"http://localhost:5000/deleteUser/\".concat(id)).then(function(res){var index=user.findIndex(function(list){return list.id===id;});var userArr=_toConsumableArray(user);userArr.splice(index,1);setUser(userArr);console.log(user);});};var editUser=function editUser(id){navigate('/admin/edituser',{state:{id:id}});};var usersTodos=function usersTodos(id){setBackdrop(true);console.log(id);axios.get(\"http://localhost:5000/UserTodos/\".concat(id)).then(function(res){var todos=[];var data=res.data.todo;for(var key in data){todos.push({id:key,data:data[key].input,isCheck:data[key].isCheck});}setTodos(todos);console.log(todos);}).catch(function(err){return console.log(err);});};var tableData=function tableData(){return user?user.map(function(users){console.log(users);return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"p-4 bg-white\",children:users.name}),/*#__PURE__*/_jsx(\"td\",{className:\"p-4 bg-white\",children:users.email}),/*#__PURE__*/_jsx(\"td\",{className:\"p-4 bg-white\",children:users.role}),/*#__PURE__*/_jsx(\"td\",{className:\"p-4 bg-white\",children:/*#__PURE__*/_jsx(\"img\",{style:props.editUser?{display:'block'}:{display:'none'},src:editIcon,onClick:editUser.bind(_this,users.id),alt:\"delete\",className:\"w-5 cursor-pointer\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"p-4 bg-white\",children:/*#__PURE__*/_jsx(\"img\",{style:props.deleteUser?{display:'block'}:{display:'none'},src:deleteIcon,onClick:deleteUserHandler.bind(_this,users.id),alt:\"delete\",className:\"w-5 cursor-pointer\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"p-4 bg-white\",children:/*#__PURE__*/_jsx(\"img\",{style:props.seeTodos?{display:'block'}:{display:'none'},src:eyeIcon,onClick:usersTodos.bind(_this,users.id),alt:\"eye\",className:\"w-5 cursor-pointer\"})})]},users.id);}):null;};var closeBackdrop=function closeBackdrop(){setBackdrop(false);setTodos([]);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Backdrop,{show:backdrop,clicked:closeBackdrop}),/*#__PURE__*/_jsx(Modal,{show:backdrop,clicked:closeBackdrop,children:todos?todos.map(function(todo){return/*#__PURE__*/_jsx(\"li\",{className:\"list-none pl-5\",style:todo.isCheck?{textDecoration:'line-through',textDecorationColor:'gray'}:null,children:todo.data});}):null}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-full flex flex-col justify-center items-center text-left\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-2/4 m-auto bg-gray-200 text-center rounded-md mt-10\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"w-40\",children:[/*#__PURE__*/_jsx(\"th\",{className:\" py-2\",children:\"NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"EMAIL\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ROLES\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:tableData()})]})})]});};","map":{"version":3,"sources":["C:/Users/user/Desktop/Diploma/Krenovator-TSA/auth/auth-client/src/pages/UsersTable.jsx"],"names":["React","useEffect","useState","axios","useNavigate","editIcon","deleteIcon","eyeIcon","Backdrop","Modal","UsersTable","props","user","setUser","backdrop","setBackdrop","todos","setTodos","navigate","get","withCredentials","then","res","console","log","users","data","key","push","id","name","email","date","role","deleteUserHandler","delete","index","findIndex","list","userArr","splice","editUser","state","usersTodos","todo","input","isCheck","catch","err","tableData","map","display","bind","deleteUser","seeTodos","closeBackdrop","textDecoration","textDecorationColor"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport axios from 'axios'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport editIcon from '../assets/edit.png'\r\nimport deleteIcon from '../assets/delete.png'\r\nimport eyeIcon from '../assets/eye.png'\r\nimport { Backdrop } from '../Components/UI/Backdrop/Backdrop'\r\nimport { Modal } from '../Components/UI/Modal/Modal'\r\n\r\n\r\nexport const UsersTable = props => {\r\n\r\n\r\n    const [user, setUser] = useState(null);\r\n    const [backdrop, setBackdrop] = useState(false)\r\n    const [todos, setTodos] = useState([])\r\n\r\n    const navigate = useNavigate();\r\n    \r\n    \r\n\r\n    useEffect(() => {\r\n    \r\n        axios.get('http://localhost:5000/admin', {withCredentials: true})\r\n        .then(res => {\r\n\r\n            console.log(res)\r\n\r\n            const users = [];\r\n            const data = res.data\r\n            for (const key in data) {\r\n                users.push({\r\n                    id: key,\r\n                    name: data[key].name, \r\n                    email: data[key].email, \r\n                    date: data[key].date,\r\n                    role: data[key].role\r\n                })\r\n            }\r\n\r\n            setUser(users)\r\n        })\r\n      }, [])\r\n\r\n\r\n\r\n      const deleteUserHandler = id => {\r\n\r\n        axios.delete(`http://localhost:5000/deleteUser/${id}`)\r\n        .then(res => {\r\n            const index = user.findIndex(list => list.id === id);\r\n            const userArr = [...user]\r\n\r\n            userArr.splice(index, 1)\r\n            setUser(userArr)\r\n            console.log(user)\r\n        }) \r\n      }\r\n\r\n      const editUser = id => {\r\n        navigate('/admin/edituser', {state: {id: id}})\r\n        \r\n      }\r\n\r\n       \r\n      const usersTodos = id => {\r\n\r\n        setBackdrop(true)\r\n\r\n        console.log(id)\r\n          \r\n        axios.get(`http://localhost:5000/UserTodos/${id}`)\r\n        .then(res => {\r\n            \r\n            const todos = [];\r\n            const data = res.data.todo\r\n            for (const key in data) {\r\n                todos.push({id: key, data: data[key].input, isCheck: data[key].isCheck})\r\n                }\r\n            setTodos(todos)\r\n\r\n            console.log(todos)\r\n\r\n            \r\n        })\r\n        .catch(err => console.log(err))\r\n          \r\n    }\r\n    \r\n    \r\n    const tableData = () => {\r\n        \r\n        return user ? user.map(users => {\r\n            console.log(users)\r\n            return (\r\n                <tr key={users.id}>\r\n                    <td className='p-4 bg-white'>{users.name}</td>\r\n                    <td className='p-4 bg-white'>{users.email}</td>\r\n                    <td className='p-4 bg-white'>{users.role}</td>\r\n                    <td className='p-4 bg-white'>\r\n                        <img style={props.editUser ? {display: 'block'} : {display: 'none'}} src={editIcon} onClick={editUser.bind(this, users.id)} alt=\"delete\" className='w-5 cursor-pointer' />\r\n                    </td>\r\n                    <td className='p-4 bg-white'>\r\n                        <img style={props.deleteUser ? {display: 'block'} : {display: 'none'}} src={deleteIcon} onClick={deleteUserHandler.bind(this, users.id)} alt=\"delete\" className='w-5 cursor-pointer' />\r\n                    </td>\r\n                    <td className='p-4 bg-white'>\r\n                        <img style={props.seeTodos ? {display: 'block'} : {display: 'none'}} src={eyeIcon} onClick={usersTodos.bind(this, users.id)} alt=\"eye\" className='w-5 cursor-pointer' />\r\n                    </td>\r\n                </tr>\r\n            )\r\n        }) : null\r\n      }\r\n      \r\n\r\n      const closeBackdrop = () => {\r\n          setBackdrop(false)\r\n          setTodos([])\r\n      }\r\n\r\n\r\n\r\n\r\n\r\n    return (\r\n        \r\n        <div>\r\n             <Backdrop show={backdrop} clicked={closeBackdrop}/>\r\n             <Modal show={backdrop} clicked={closeBackdrop}> \r\n                {todos ? todos.map(todo => {\r\n                    return (\r\n                        <li className=\"list-none pl-5\" style={todo.isCheck ? {textDecoration: 'line-through', textDecorationColor: 'gray'} : null} >{todo.data}</li>\r\n                    )\r\n                }) : null}\r\n             </Modal>\r\n        \r\n             <div className='w-full h-full flex flex-col justify-center items-center text-left'>\r\n\r\n                    <table className='w-2/4 m-auto bg-gray-200 text-center rounded-md mt-10'>\r\n                        <thead>\r\n                            <tr className='w-40'>\r\n                                <th className=' py-2'>NAME</th>\r\n                                <th>EMAIL</th>\r\n                                <th>ROLES</th>\r\n                            </tr>\r\n                        </thead>\r\n\r\n                        <tbody>\r\n                            {tableData()}\r\n                        </tbody>\r\n\r\n                    </table>\r\n                </div>     \r\n        </div>\r\n              \r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}